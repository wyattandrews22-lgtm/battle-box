<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>⚔️ Battle Box ⚔️</title>
  <style>
    body {
      background-color: #101020;
      color: #fff;
      font-family: 'Press Start 2P', monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .game {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 40px;
    }
    .left {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .chest {
      width: 120px;
      height: 120px;
      background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAETklEQVR4nO3bzW0TQRSA4feYEiD5lLAAihkYiU0SCGsRTAqHgEUkPMS6Q0sFDLIzCT5AWwsKzPYtv5cY++Xuz9cefnN7dp7B37jjdbnQAAAAAAAAAAAAAAAAAAAAAAAIAv7z5Dg8M41s+qFj89cXtzvqG8kzCfxdXgL4n8ZrCd1Nv3Okv5koH8b7O0TPmcXxvNNgC1Q7mZ8yW2z4mnGWSeXwn2b4W5s8Yd7fs4d5fjHOfG0ObXnNnh4pYSmfHysZ7LxzAoeY7id3O+U69PzJWlYmdNnHK2nujfRfL8Z9s4fy6/KHqHcHeM2D2gV4V+4q9xPz7pVjSLOZ1x9H2Xs1NcfO1yZxZ/3Zdfyt6wf1ztHnvuhmNR7N/btcYw8Z7vHHcRuvNubHOM7/3nGMRvW+38AAAAAAAAAAAAAAAAAAAAAAAAAAADwcf4DRZ+jH6FStZMAAAAASUVORK5CYII=') no-repeat center/contain;
      margin-bottom: 10px;
    }
    button {
      background: #d47c1b;
      border: 2px solid #ffb347;
      padding: 10px 20px;
      color: white;
      font-family: 'Press Start 2P', monospace;
      cursor: pointer;
      box-shadow: 3px 3px #000;
      transition: transform 0.1s;
    }
    button:active {
      transform: translateY(2px);
    }
    .collection {
      border: 2px solid #ffb347;
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(5, 60px);
      gap: 10px;
      background-color: #181830;
    }
    .weapon {
      width: 60px;
      height: 60px;
      border: 2px solid #333;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #222;
      cursor: pointer;
    }
    .weapon.selected {
      border: 2px solid #ffb347;
    }
    .rarity-common { filter: brightness(0.8); }
    .rarity-uncommon { border-color: green; }
    .rarity-rare { border-color: blue; }
    .rarity-epic { border-color: purple; }
    .rarity-legendary { border-color: gold; }
    h1 {
      text-align: center;
      color: #ffb347;
    }
  </style>
</head>
<body>
  <div class="game">
    <div class="left">
      <h1>⚔️ Battle Box ⚔️</h1>
      <div class="chest"></div>
      <p>Gold: <span id="gold">50</span></p>
      <button id="openChest">Open Chest (10g)</button>
      <button id="sellButton">Sell Selected</button>
    </div>

    <div>
      <h2>Collection Book</h2>
      <div id="collection" class="collection"></div>
    </div>
  </div>

  <script>
    const weapons = [
      'Iron Sword','Steel Sword','Wooden Bow','Crossbow','Magic Wand','Fire Staff','Dagger','Axe','Hammer','Longsword',
      'Greatsword','Katana','Trident','Spear','Crystal Sword','Dark Blade','Golden Axe','Lightning Bow','Shadow Dagger','Divine Hammer'
    ];
    const rarities = ['common','uncommon','rare','epic','legendary'];
    const dropRates = {
      common: 0.5,
      uncommon: 0.3,
      rare: 0.15,
      epic: 0.045,
      legendary: 0.005
    };
    const sellValues = {
      common: 5,
      uncommon: 10,
      rare: 20,
      epic: 50,
      legendary: 100
    };

    let gold = 50;
    let collection = [];
    let selectedIndex = null;

    const goldEl = document.getElementById('gold');
    const collectionEl = document.getElementById('collection');

    function updateGold() { goldEl.textContent = gold; }

    function getRarity() {
      const r = Math.random();
      let total = 0;
      for (let key in dropRates) {
        total += dropRates[key];
        if (r < total) return key;
      }
      return 'common';
    }

    function renderCollection() {
      collectionEl.innerHTML = '';
      collection.forEach((item, i) => {
        const div = document.createElement('div');
        div.classList.add('weapon', 'rarity-' + item.rarity);
        if (selectedIndex === i) div.classList.add('selected');
        div.title = `${item.name} (${item.rarity})`;
        div.textContent = '⚔️';
        div.onclick = () => {
          if (selectedIndex === i) selectedIndex = null; else selectedIndex = i;
          renderCollection();
        };
        collectionEl.appendChild(div);
      });
    }

    document.getElementById('openChest').onclick = () => {
      if (gold < 10) return alert('Not enough gold!');
      gold -= 10;
      const rarity = getRarity();
      const name = weapons[Math.floor(Math.random() * weapons.length)];
      collection.push({ name, rarity });
      updateGold();
      renderCollection();
    };

    document.getElementById('sellButton').onclick = () => {
      if (selectedIndex === null) return alert('Select a weapon first!');
      const item = collection[selectedIndex];
      gold += sellValues[item.rarity];
      collection.splice(selectedIndex, 1);
      selectedIndex = null;
      updateGold();
      renderCollection();
    };

    renderCollection();
  </script>
</body>
</html>
